(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a19dde2"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,i,s){return e/=s/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,i){var r=o(),a=e-r,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var o=Math.easeInOutQuad(c,r,a,t);n(o),c<t?s(e):i&&"function"===typeof i&&i()};u()}},"3f4b":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"发起流程",visible:e.dialogStartProcessVisibleInChild,fullscreen:!1},on:{"update:visible":function(t){e.dialogStartProcessVisibleInChild=t}}},[e.generateStartFormVisible?i("div",[i("form-parser",{ref:"generateStartForm",attrs:{data:e.startFormJson}})],1):e._e(),e._v(" "),i("select-user",{ref:"selectUser",attrs:{visible:e.selectUserVisible,appendToBody:!0,multipleSelect:!0},on:{"update:visible":function(t){e.selectUserVisible=t},selectUserFinished:e.selectUserFinished}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-form",{attrs:{"label-width":"100px"}},[e.showBusinessKey?i("el-form-item",{attrs:{label:"业务主键Key:"}},[i("el-input",{attrs:{placeholder:"请输入业务主键Key"},model:{value:e.businessKey,callback:function(t){e.businessKey=t},expression:"businessKey"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"抄送给:"}},[i("el-row",{attrs:{align:"left"}},[i("el-col",{attrs:{span:1,align:"left"}},[i("i",{staticClass:"el-icon-plus el-icon--left",staticStyle:{cursor:"pointer"},on:{click:e.doSelectCcTo}})]),e._v(" "),i("el-col",{attrs:{span:23,align:"left"}},e._l(e.ccToVos,(function(t){return i("el-tag",{key:t.userId,staticStyle:{"margin-left":"5px"},attrs:{effect:"plain",closable:""},on:{close:function(i){return e.handleCcToClose(t)}}},[e._v(e._s(t.userName)+"\n                        ")])})),1)],1)],1)],1),e._v(" "),i("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.dialogStartProcessVisibleInChild=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-close"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.doStartInstance}},[e._v("确定\n        ")])],1)],1)},n=[],o=i("0fea"),r=i("5c96"),a=i("c4f3"),l=i("ef35"),c={name:"StartProcess",components:{SelectUser:a["default"],FormParser:l["default"]},props:{visible:{type:Boolean,default:function(){return!1}},processDefinition:{type:Object,default:function(){return{}}}},computed:{dialogStartProcessVisibleInChild:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},data:function(){return{generateStartFormVisible:!1,startFormJson:void 0,variables:void 0,showBusinessKey:!1,businessKey:void 0,selectUserVisible:!1,ccToVos:[]}},created:function(){this.initData()},methods:{initData:function(){var e=this;Object(o["c"])("/flowable/processDefinition/renderedStartForm",{processDefinitionId:this.processDefinition.id}).then((function(t){var i=t.data;e.showBusinessKey=i.showBusinessKey,i.renderedStartForm&&(e.startFormJson=JSON.parse(i.renderedStartForm),e.generateStartFormVisible=!0)}))},doSelectCcTo:function(){this.selectUserVisible=!0,0==this.$refs.selectUser.treeData.length&&this.$refs.selectUser.getTreeData()},selectUserFinished:function(e){e&&0!=e.length?this.ccToVos=e:r["Message"].error("请先选择用户")},handleCcToClose:function(e){this.ccToVos.splice(this.ccToVos.indexOf(e),1)},doStartInstance:function(){var e=this;this.$refs.generateStartForm?this.$refs.generateStartForm.getData().then((function(t){if(t&&void 0!=t){var i=JSON.stringify(t),s=Object.assign({processInstanceFormData:i},t);return Object(o["d"])("/flowable/processInstance/start",{processDefinitionId:e.processDefinition.id,businessKey:e.businessKey,values:s,ccToVos:e.ccToVos}).then((function(t){var i=t.msg;r["Message"].success(i),e.dialogStartProcessVisibleInChild=!1}))}})).catch((function(e){})):Object(o["d"])("/flowable/processInstance/start",{processDefinitionId:this.processDefinition.id,businessKey:this.businessKey,ccToVos:this.ccToVos}).then((function(t){var i=t.msg;r["Message"].success(i),e.dialogStartProcessVisibleInChild=!1}))},reset:function(){this.$refs.generateStartForm.resetFields(),this.ccToVos=[]}}},u=c,f=i("2877"),d=Object(f["a"])(u,s,n,!1,null,null,null);t["default"]=d.exports},7529:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"流程定义名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.btnQuery(t)}},model:{value:e.listQuery.processDefinitionName,callback:function(t){e.$set(e.listQuery,"processDefinitionName",t)},expression:"listQuery.processDefinitionName"}}),e._v(" "),i("el-dropdown",{staticClass:"filter-item",attrs:{"split-button":"",type:"primary"},on:{click:e.btnQuery}},[i("i",{staticClass:"el-icon-search el-icon--left"}),e._v("查询\n            "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{icon:"el-icon-zoom-out"},nativeOn:{click:function(t){return e.btnReset(t)}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("el-row",e._l(e.records,(function(t){return i("el-col",{attrs:{span:12}},[i("div",{staticClass:"filter-container",staticStyle:{"margin-right":"3px","margin-bottom":"3px"}},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(t.name)+"-v"+e._s(t.version))]),e._v(" "),i("div",{staticStyle:{position:"relative","text-align":"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.btnImage(t.id)}}},[e._v("流程图")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.btnStartInstance(t)}}},[e._v("发起流程\n                            ")])],1)]),e._v(" "),i("div",{staticClass:"text item"},[e._v("\n                        "+e._s(t.description?t.description:"无描述")+"\n                    ")]),e._v(" "),i("div",{staticClass:"text item"},[e._v("\n                        "+e._s(t.category?t.category:"无命名空间")+"\n                    ")])])],1)])})),1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,current:e.listQuery.current,size:e.listQuery.size},on:{"update:current":function(t){return e.$set(e.listQuery,"current",t)},"update:size":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.list}}),e._v(" "),i("el-dialog",{attrs:{title:"流程图",fullscreen:"",visible:e.dialogImageVisible,width:"80%"},on:{"update:visible":function(t){e.dialogImageVisible=t}}},[i("img",{attrs:{src:e.imagePath,alt:"流程图"}})]),e._v(" "),e.dialogStartInstanceVisible?i("start-process",{attrs:{visible:e.dialogStartInstanceVisible,processDefinition:e.processDefinition},on:{"update:visible":function(t){e.dialogStartInstanceVisible=t}}}):e._e()],1)},n=[],o=i("333d"),r=i("0fea"),a=i("5c96"),l=i("5f87"),c=i("3f4b"),u={name:"FlowableStartMyProcess",components:{StartProcess:c["default"],Pagination:o["default"]},data:function(){return{dicts:[],records:null,selectedRecords:[],total:0,listQuery:{current:1,size:10,processDefinitionId:void 0,processDefinitionName:void 0,processDefinitionKey:void 0,latestVersion:!0,suspended:void 0},dialogFormVisible:!1,dialogImportVisible:!1,dialogImageVisible:!1,imagePath:"",dialogStartInstanceVisible:!1,formJson:void 0,dialogProcessDefinitionIdentityLinkVisible:!1,selectedProcessDefinitionId:"",selectedProcessDefinitionName:"",processDefinition:void 0}},created:function(){this.list()},methods:{list:function(){var e=this;Object(r["c"])("/flowable/processDefinition/listMyself",this.listQuery).then((function(t){var i=t.data;e.records=i.records,e.total=i.total,0==i.total&&a["Message"].info("查无可发起的流程")}))},btnQuery:function(){this.listQuery.current=1,this.list()},btnReset:function(){this.listQuery={current:1,size:10,processDefinitionId:void 0,processDefinitionName:void 0,processDefinitionKey:void 0,latestVersion:!0,suspended:void 0},this.list()},btnImage:function(e){this.imagePath="".concat("/zjmzxfzhl")+"/flowable/processDefinition/image?processDefinitionId="+e+"&access_token="+Object(l["a"])()+"&time="+new Date,this.dialogImageVisible=!0},btnStartInstance:function(e){this.processDefinition=e,this.dialogStartInstanceVisible=!0}}},f=u,d=i("2877"),p=Object(d["a"])(f,s,n,!1,null,null,null);t["default"]=p.exports},"9f00":function(e,t,i){var s={"./el-button.js":"64b1","./el-checkbox-group.js":"cc1a","./el-input.js":"373c","./el-radio-group.js":"afca","./el-select.js":"a938","./el-upload.js":"73ee"};function n(e){var t=o(e);return i(t)}function o(e){var t=s[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id="9f00"},ef35:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["formMaking"==e.formDesignType?i("fm-generate-form",{ref:"formMaking",attrs:{data:e.data,value:e.value}}):e._e(),e._v(" "),"formGenerator"==e.formDesignType?i("parser",{ref:"formGenerator",attrs:{"form-conf":e.data,value:e.value}}):e._e()],1)},n=[],o=i("8849"),r=i("93ff"),a=i("83d6"),l=i.n(a),c={name:"FormParser",components:{FormGenerator:o["default"],Parser:r["a"]},props:["data","value"],data:function(){return{}},computed:{formDesignType:function(){return l.a.formDesignType}},methods:{getData:function(){return"formMaking"==this.formDesignType||"formGenerator"==this.formDesignType?this.$refs[this.formDesignType].getData():null},resetFields:function(){"formMaking"==this.formDesignType?this.$refs[this.formDesignType].reset():"formGenerator"==this.formDesignType&&this.$refs[this.formDesignType].resetForm()}}},u=c,f=i("2877"),d=Object(f["a"])(u,s,n,!1,null,null,null);t["default"]=d.exports}}]);